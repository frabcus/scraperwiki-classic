{% load markup %}
{% load screen_shot %}

<li class="code_object_line">

    <table class="code_about" cellspacing="0" cellpadding="0">
        {% ifequal code.wiki_type 'view' %}
        <tr class="codewiki_type {{code.wiki_type|lower}}">
            <td class="label">Type</td>
            <td class="link"><a href="{% url rpcexecute code.short_name %}">{{code.wiki_type|lower}}</a></td>
        </tr>
        {% else %}
        <tr class="codewiki_type {{code.wiki_type|lower}}">
            <td class="label">Type</td>
            <td class="link">{{code.wiki_type|lower}}</td>
        </tr>
        {% endifequal %}
        <tr class="language {{code.language|lower}}">
            <td class="label">Language</td>
            <td class="link"><a href="{% url editor_edit code.wiki_type code.short_name %}">{{code.language|lower}}</a></td>
        </tr>
        {% if code.is_sick_and_not_running %}
        <tr class="notes">
            <td class="label">Notes</td>
            <td class="link about_sick"><a href="{% url code_overview code.wiki_type code.short_name %}">Maintenance<br/>required</a>
         {% endif %}
        </tr>
    </table>
    
    <a href="{% url code_overview code.wiki_type code.short_name %}" class="screenshot">{% screen_shot code 'small' %}</a>
    
    <h3><a href="{% url code_overview code.wiki_type code.short_name %}">
        {% if code.title %}{{ code.title }}{% else %}{{ code.short_name }}{% endif %}
    </a></h3>
    
    <p class="context">Created by <a class="owner" href="{% if code.owner.username %}{% url profiles_profile_detail code.owner.username %}{% endif %}">{% if code.owner.get_profile.name %}{{ code.owner.get_profile.name }}{% else %}{{code.owner.username}}{% endif %}</a>  {{code.created_at|timesince}} ago</p>
    
    <p class="description">{{ code.description|textile|striptags|truncatewords:75 }}</p>
    
</li>





{% comment %}<li class="code_object_line">
    <h3>
        <!-- scraper id: {{ code.id }} -->
        <a href="{% url code_overview code.wiki_type code.short_name %}" class="screenshot">{% screen_shot code 'small' %}</a>
        <a href="{% if code.owner.username %}{% url profiles_profile_detail code.owner.username %}{% endif %}">
         {% if code.owner.get_profile.name %}{{ code.owner.get_profile.name }}{% else %}{{code.owner.username}}{% endif %}
        </a> /
        <a href="{% url code_overview code.wiki_type code.short_name %}">
            {% if code.title %}{{ code.title }}{% else %}{{ code.short_name }}{% endif %}
        </a>
        {% ifnotequal code.privacy_status 'public' %}
          [{{code.privacy_status}}]
        {% endifnotequal %}
        <ul class="code_about">
           {% ifequal code.wiki_type 'view' %}
             <li class="codewiki_type {{code.wiki_type|lower}}"><a href="{% url rpcexecute code.short_name %}">{{code.wiki_type|lower}}</a></li>
           {% else %}
             <li class="codewiki_type {{code.wiki_type|lower}}">{{code.wiki_type|lower}}</li>
           {% endifequal %}
           <li class="language {{code.language|lower}}"><a href="{% url editor_edit code.wiki_type code.short_name %}">{{code.language|lower}}</a></li>

           {% if code.scraper %}
             {% if code.scraper.has_geo %}
               <li><img src="{{ MEDIA_URL }}/images/icons/map.png"/></li>
             {% endif %}
             {% if code.scraper.has_temporal %}
               <li><img src="{{ MEDIA_URL }}/images/icons/date.png"/></li>
             {% endif %}
             {% if code.is_sick_and_not_running %}
                <a href="{% url code_overview code.wiki_type code.short_name %}">
                <li class="about_sick"> <strong> Maintenance required! </strong></li>
                </a>
             {% endif %}
           {% endif %}

        </ul>
    </h3>
    <small>
        Created
        {{code.created_at|timesince}} ago
        {% if code.scraper %}
                 | 
            {% if code.scraper.record_count %}
              ({{ code.scraper.record_count }} records)
            {% else %}
              (no records)
            {% endif %}
        {% endif %}
    </small>
    
        <p>
    {% if code.description %}
            {{ code.description|textile|striptags|truncatewords:75 }}            
    {% else %}
            &nbsp;
    {% endif %}
        </p>
    
</li>
        {% endcomment %}


