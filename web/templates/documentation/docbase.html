{% extends "frontend/base.html" %}

{% block title %}
    {% if title %}Docs &ndash; {{title}}{% else %}Documentation{% endif %}
{% endblock %}

{% block javascript %}<script type="text/javascript" src="{{ MEDIA_URL }}js/ZeroClipboard.js?"></script>{% endblock %}

{% block run_script %}
    ZeroClipboard.setMoviePath( '{{ MEDIA_URL }}js/ZeroClipboard.swf' );
    $(".copy_to_clipboard").each(function(i) {
        
        var el = $(this);
        var parent = el.parent();
        var code = el.siblings('code');
            
        clip = new ZeroClipboard.Client();
        clip.setText(code.text());
        clip.setHandCursor( true );

        clip.addEventListener( 'complete', function(client, text) {
        //  alert("Copied text to clipboard: " + text );
            el.text('Copied');
        } );
        
        clip.glue(el[0], parent[0]);
        
    });
{% endblock %}

{% block header %}
<h2>{% if title %}Docs &ndash; {{title}}{% else %}Documentation{% endif %}</h2>
	{% if para %}<p>{{ para|safe}}</p>{% endif %}
	{% endblock %}

{% block content %}

  <div class="documentationpage">
    {% if scraper %}
      {% if user.is_staff %}
        <div class="staff" style="float:right">
          <a href="{% url editor_edit scraper.wiki_type scraper.short_name %}">Edit</a>
          | <a href="/admin/codewiki/{{scraper.wiki_type}}/{{scraper.pk}}/">Admin</a>
        </div>
      {% endif %}
    {% endif %}
    <div id="help_content">
    {% if doccontents %}
      {{doccontents|safe}}
    {% else %}
        {% include "documentation/language_picker.html" %}
		{% if docpage %}
      		{% include docpage %}
    	{% else %}
      		{% include 'documentation/includes/docindex.html' %}
    	{% endif %}
	{% endif %}
    </div>
  </div>

  <script type='text/javascript'>
	$('body').addClass( '{{language}}');
	
	function switch_language(to) {
		if ( window.location.href.indexOf( '{{language}}' ) == -1  ) {
			window.location.href = '/docs/' + to;
			return false;
		}
		window.location.href = window.location.href.replace('{{language}}',to).replace('{{language}}',to);
		return false;
	}
  </script>

{% endblock %}
