{% extends "frontend/base.html" %}

{% load gravatar %}
{% block css %}{% endblock %}
{% block title %}Profile Details: {{ profile.user.username }}{% endblock %}

{% block content %}

    <div class="page_title">
    <div style="float: left;">
		<h1>{{ profile.user.username }}'s profile</h1>
		<br/>
		{% show_gravatar profile.user 'large' %} 
		<p>{{ profile.bio }}</p>
	</div>
	
	<div  style="float: right; text-align: right;"> 
		 {% ifequal profile.user.username user.username %}
	     <a href="/profiles/edit/">Edit your profile</a>
         {% else  %}
			{% if user.is_authenticated %}
			  <form method="post" action="">
			  {% if following %}
			   You are following {{ profile.user.username}} <input type="submit" value="Unfollow" />
     	      {% else%}
			   <input type="submit" value="Follow {{ profile.user.username}}" />
     	      {% endif %} 
               </form>
     	    {% endif %} 
        {% endifequal %}
	</div>
	
	<div style="clear:both;"></div>
	
	</div>

		
	<div class="content">
	<div style="float: left;">
		    	<h2>{{ profile.user.username }}'s published scrapers</h2>
    	<ul>  
	{%  if owned_scrapers %}
        	{% for scraper in owned_scrapers %}
        	          {% include 'frontend/scraper_line.html' %}
        	{% endfor %}
     {% else %}
	No scrapers yet
     {% endif %}
	    </ul> 	
    </div>
    
    <div style="float: right; ">

    	<h2>Scrapers {% ifequal profile.user.username user.username %} you are {% else %} {{ profile.user.username }} is {% endifequal %} watching</h2>
    	
    	{% if  profile.user.scraper_set.not_watching_any %}
    	  <p>
        {% ifequal profile.user.username user.username %}
          You are 
         {% else  %}
          {{ profile.user.username }} is
          {% endifequal %}
           not watching any scrapers</p>
    	{% else %}
    	  <ul>
    		{% for scraper in profile.user.scraper_set.watching %}	
    		  {% include 'frontend/detailed_scraper_line.html' %}
    		{% endfor %}
    	  </ul>
    	{% endif %}
    	
    	<h2>People {% ifequal profile.user.username user.username %} you are {% else %} {{ profile.user.username }} is {% endifequal %} following</h2>
    	
    	{% if profile.user.to_user.not_following_anyone %}
    	  <p>
    	
		 {% ifequal profile.user.username user.username %}
          You are 
         {% else  %}
          {{ profile.user.username }} is
        {% endifequal %}
        not following anyone</p>
          
        {% else %}
          <ul> 
            {% for other_user in profile.user.to_user.following %}
			<li>{% show_gravatar other_user 'small' %}
			 <a href='{% url profiles_profile_detail other_user %}'>
					                {{ other_user.username }}
			 </a>	
            </li>
    	    {% endfor %}
    	  </ul>  

        {% endif %} 




        
            	<!-- 
            	
            	
            	<h2>People who follow {% ifequal profile.user.username user.username %} you {% else %} {{ profile.user.username }} {% endifequal %}</h2>    	
    	
    	{% if profile.user.from_user.not_followed_by_anyone %}
    	  <p>
    	No-one is following
		 {% ifequal profile.user.username user.username %}
          you
         {% else  %}
          {{ profile.user.username }} 
        {% endifequal %}
        yet</p>
          
        {% else %}
          <ul> 
            {% for other_user in profile.user.from_user.followed_by %}
              {% show_gravatar profile.user 'medium' %} 
    	      {% include 'frontend/user_line.html' %}
    	    {% endfor %}
    	  </ul>  
        {% endif %}
        -->
        </div>
    </div>
    
    <div style="clear:both;"></div>
    
    {% endblock %}