<h4>Scraping a web page</h4>
<dl class="functiondocs">
    <dt>Return the source text of a web page as a string:</dt>        
    <dd>
        <code>html = scraperwiki::scrape($url)</code>
    </dd>
</dl>     
<h4>Parsing (simple examples)</h4>
<dl class="functiondocs">
    <dt>Extract data using BeautifulSoup</dt>
    <dd>
        <code>
            require 'scraperwiki/simple_html_dom.php';<br/>
            $dom = new simple_html_dom();<br/>
            $dom->load($html);<br/>
            foreach($dom->find('td') as $data){<br/>
            &nbsp;&nbsp;&nbsp;&nbsp;print $data->plaintext . "\n";<br/>
            }

        </code>
        <p>
            <a href="http://www.crummy.com/software/BeautifulSoup/" target="_new">Full documentation for BeautifulSoup (new window)</a>
        </p>
    </dd>
</dl>
<h4>Saving data</h4>
<dl class="functiondocs">
    <dt>
        Save to the datastore:
    </dt>
    <dd>
        <code>
            scraperwiki::save($unique_keys=array(), $data=array(), <em>$date=null</em>, <em>$latlng=null</em>)
        </code>
        <p>
            Saves a key-value array, <em>data</em>, to the datastore. <em>unique_keys</em> is a list of keys appearing in the dictionary used to determine if if a record should be inserted or updated. 
            <em>date</em> and <em>latlng</em> are optional special fields  for indexing each record.
        </p>
    </dd>
</dl>
<h4>Scraper meta data</h4>
<dl class="functiondocs">
  <dt>
    Save a persistent variable accessible during another run
  </dt>
  <dd>
      <code>
          scraperwiki::save_metadata($key, $value)
      </code>
  </dd>
  <dt>
      Retrieve a persistent variable saved by this scraper
  </dt>
  <dd>
      <code>
          scraperwiki::get_metadata($key, $default=null)
      </code>
  </dd>
</dl>

<h4>Geocoding</h4>
<dl class="functiondocs">
  <dt>
        Convert a UK postcode to a (lat,lng) pair:
  </dt>
  <dd>
      <code>
          lat_lng = scraperwiki::gb_postcode_to_latlng(postcode)
      </code>
  </dd>
</dl>
<h4>Recommended libraries</h4>
<ul>
    <li><strong>Simple HTML DOM</strong> -   HTML DOM parser that allows selection of tags using selectors. <a href="http://simplehtmldom.sourceforge.net/manual.htm" target="_blank">Full documentation (new window)</a></li>
</ul>
