
{% extends "frontend/base.html" %}

{% block title %}Browse datasets{% endblock %}
{% block rss %}<link rel="alternate" type="application/rss+xml" title="RSS" href="/feeds/all_code_objects/" />{% endblock %}

{% block content %}
<div class="page_title">
    <h1>Who's doing what</h1>
</div>

<div class="content">

<table class="scrapersediting">
<tr>
  <td>Logged-in users editing</td><td>{{loggedinusers|length}}</td>
  <td>Logged-out users editing</td><td>{{numloggedoutusers}}</td>
  <td>Draft scrapers editing</td><td>{{numdraftscrapersediting}}</td>
</tr>
<tr>
  <td>Published scrapers editing</td><td>{{numpublishedscrapersediting}}</td>
  <td>Unpublished scrapers editing</td><td>{{numunpublishedscrapersediting}}</td>
  <td>&nbsp;</td><td>&nbsp;</td>
</tr>
<tr>
  <td>Published scrapers total</td><td>{{numpublishedscraperstotal}}</td>
  <td>Unpublished scrapers total</td><td>{{numunpublishedscraperstotal}}</td>
  <td>Deleted scrapers total</td><td>{{numdeletedscrapers}}</td>
</tr>
</table>

<table class="scraperlist">
<tr>
  <th>Title</th>
  <th>Editors</th>
  <th>Line Count</th>
  <th>Record Count</th>
  <th>Language</th>
</tr>

{% for scraper in scrapers %}
<tr>
  <td>
    <a href='{% url scraper_code  scraper.wiki_type  scraper.short_name %}'>{{ scraper.title }}</a>
  </td>
  <td>
    {% for usercodeediting in scraper.userscraperediting_set.all %} 
        {% if userscraperediting.user %}
            {{userscraperediting.user.get_profile.name}}
        {% else %}
            Anonymous
        {% endif %}
        (editing for {{userscraperediting.editingsince|timesince}})
        <sup>[{{userscraperediting.twisterclientnumber}}]</sup>
    {% endfor %}
  </td> 

  <td>{{ scraper.line_count }}</td>
  <td>{{ scraper.record_count }}</td>
  <td>{{ scraper.language }}</td>
</tr>
{% endfor %}
</table>
</div>
{% endblock %}
