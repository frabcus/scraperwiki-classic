
<h1>UML Status</h1>
<table border="1">
<tr><th>Scraper</th><th>time</th><th>kill button</th><th>Runid</th></tr>
{% for status in statusscrapers %}
  <tr>
    <td>
    {% if status.scraper %}
      <a href="{% url code_overview status.scraper.wiki_type status.scraper.short_name %}">{{status.scraper.title}}</a>
    {% else %}
      {{status.scraperID}}--
    {% endif %}
    </td>

    <td>
    {% if status.scraperrunevent %}
      <a href="{% url run_event status.scraperrunevent.id %}">{{status.runtime|floatformat}} seconds</a>
    {% else %}
      {{status.runtime|floatformat}} seconds
    {% endif %}
    </td>

    <td>
    {% if status.killable %}

    {% if status.scraperrunevent %}
    <form action="{% url scraper_killrunning status.runID status.scraperrunevent.id %}" method="post">
    {% else %}
    <form action="{% url scraper_killrunning status.runID %}" method="post">
    {% endif %}
        <input type="hidden" id="hidKillRun" name="killrun" value="1" />
        <input type="submit" id="btnKillRun" class="danger" value="Kill running scraper" />
    </form>
    {% endif %}
    </td>
    <td><small>{{status.runID}}</small></td>
  </tr>
{% endfor %}
</table>


<h1>Recent runs</h1>
<table border=1>
  <tr>
    <th>Scraper</th>
    <th>Started</th>
    <th>Duration</th>
    <th>Output summary</th>
  </tr>
{% for run_event in events %}
  <tr>
    <td><a href="{% url code_overview run_event.scraper.wiki_type run_event.scraper.short_name %}">{{run_event.scraper.title}}</a></td> 
    <td>{{run_event.run_started|timesince}} ago (<small>{{run_event.run_started}}</small>)</td> 
    <td>{{run_event.getduration}} seconds</td> 
    <td><a href="{% url run_event run_event.id %}">{{run_event.outputsummary}}</a></td>
  </tr>
{% endfor %}
</table>
